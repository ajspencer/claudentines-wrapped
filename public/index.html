<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Claudentines Wrapped</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            height: 100%;
            font-family: 'Inter', -apple-system, sans-serif;
            background: #e81b5b;
            color: white;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* ‚îÄ‚îÄ Screens ‚îÄ‚îÄ */
        .screen {
            min-height: 100vh;
            min-height: 100dvh;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            padding: 40px 24px;
        }

        .screen.active {
            display: flex;
        }

        /* ‚îÄ‚îÄ The Pink Gradient BG ‚îÄ‚îÄ */
        .bg-pink {
            background: linear-gradient(180deg, #f74c89 0%, #e81b5b 35%, #d4145a 65%, #c0044d 100%);
        }

        .bg-dark {
            background: #0a0a0a;
        }

        /* ‚îÄ‚îÄ Hearts Layer ‚îÄ‚îÄ */
        .hearts-layer {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }

        .heart {
            position: absolute;
            animation: floatHeart linear infinite;
            will-change: transform;
        }

        @keyframes floatHeart {
            0% {
                transform: translate(0, 0) rotate(0deg) scale(var(--s));
                opacity: var(--o);
            }
            25% {
                transform: translate(calc(var(--dx) * 0.5), -25vh) rotate(90deg) scale(var(--s));
            }
            50% {
                transform: translate(var(--dx), -50vh) rotate(180deg) scale(var(--s));
                opacity: var(--o);
            }
            75% {
                transform: translate(calc(var(--dx) * 0.3), -75vh) rotate(270deg) scale(var(--s));
            }
            100% {
                transform: translate(0px, -110vh) rotate(360deg) scale(var(--s));
                opacity: 0;
            }
        }

        /* ‚îÄ‚îÄ Content (above hearts) ‚îÄ‚îÄ */
        .content {
            position: relative;
            z-index: 10;
            text-align: center;
            max-width: 560px;
            width: 100%;
        }

        /* ‚îÄ‚îÄ Typography ‚îÄ‚îÄ */
        .logo-heart {
            font-size: 5rem;
            display: block;
            margin-bottom: 8px;
            filter: drop-shadow(0 8px 24px rgba(0,0,0,0.2));
            animation: heartBeat 2s ease-in-out infinite;
        }

        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            14% { transform: scale(1.1); }
            28% { transform: scale(1); }
            42% { transform: scale(1.08); }
            56% { transform: scale(1); }
        }

        .title {
            font-size: clamp(3rem, 10vw, 5.5rem);
            font-weight: 900;
            line-height: 0.95;
            letter-spacing: -2px;
            text-shadow: 0 4px 20px rgba(0,0,0,0.15);
            margin-bottom: 16px;
        }

        .subtitle {
            font-size: clamp(0.9rem, 2.5vw, 1.15rem);
            font-weight: 600;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0.85;
            text-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .description {
            font-size: clamp(1rem, 2.5vw, 1.15rem);
            font-weight: 500;
            line-height: 1.7;
            opacity: 0.9;
            margin-top: 24px;
            max-width: 420px;
            margin-left: auto;
            margin-right: auto;
        }

        .small-note {
            font-size: 0.78rem;
            opacity: 0.5;
            margin-top: 8px;
            font-weight: 500;
        }

        /* ‚îÄ‚îÄ Buttons ‚îÄ‚îÄ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            border: none;
            border-radius: 60px;
            font-family: inherit;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-decoration: none;
            letter-spacing: 0.3px;
        }

        .btn-white {
            background: white;
            color: #d4145a;
            padding: 18px 48px;
            font-size: 1.05rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.15);
        }

        .btn-white:hover {
            transform: translateY(-2px) scale(1.03);
            box-shadow: 0 12px 40px rgba(0,0,0,0.2);
        }

        .btn-white:active {
            transform: scale(0.98);
        }

        .btn-pink {
            background: linear-gradient(135deg, #f74c89, #e81b5b);
            color: white;
            padding: 18px 48px;
            font-size: 1.05rem;
            box-shadow: 0 8px 32px rgba(232, 27, 91, 0.4);
        }

        .btn-pink:hover {
            transform: translateY(-2px) scale(1.03);
            box-shadow: 0 12px 40px rgba(232, 27, 91, 0.5);
        }

        .btn-outline {
            background: rgba(255,255,255,0.12);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 14px 36px;
            font-size: 0.9rem;
            backdrop-filter: blur(8px);
        }

        .btn-outline:hover {
            background: rgba(255,255,255,0.2);
            border-color: rgba(255,255,255,0.5);
            transform: translateY(-1px);
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
            margin-top: 36px;
        }

        /* ‚îÄ‚îÄ Input ‚îÄ‚îÄ */
        .input-wrapper {
            margin-top: 32px;
            width: 100%;
            max-width: 380px;
            margin-left: auto;
            margin-right: auto;
        }

        .input-label {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.7;
            margin-bottom: 12px;
            text-align: left;
            display: block;
        }

        .name-input {
            width: 100%;
            padding: 18px 24px;
            background: rgba(255,255,255,0.15);
            border: 2px solid rgba(255,255,255,0.25);
            border-radius: 16px;
            color: white;
            font-size: 1.2rem;
            font-family: inherit;
            font-weight: 700;
            text-align: center;
            outline: none;
            transition: all 0.25s ease;
            backdrop-filter: blur(8px);
        }

        .name-input::placeholder {
            color: rgba(255,255,255,0.4);
            font-weight: 500;
        }

        .name-input:focus {
            border-color: rgba(255,255,255,0.6);
            background: rgba(255,255,255,0.2);
            box-shadow: 0 0 0 4px rgba(255,255,255,0.1);
        }

        /* ‚îÄ‚îÄ Prompt Screen ‚îÄ‚îÄ */
        .prompt-screen-inner {
            max-width: 640px;
            width: 100%;
        }

        .prompt-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .prompt-header h2 {
            font-size: clamp(1.8rem, 5vw, 2.4rem);
            font-weight: 900;
            letter-spacing: -0.5px;
            margin-bottom: 8px;
            text-shadow: 0 2px 12px rgba(0,0,0,0.12);
        }

        .prompt-header p {
            font-size: 0.95rem;
            opacity: 0.85;
            line-height: 1.6;
        }

        .prompt-box-wrap {
            position: relative;
            margin-bottom: 20px;
        }

        .prompt-box {
            background: rgba(0,0,0,0.25);
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 16px;
            padding: 28px;
            font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
            font-size: 0.8rem;
            line-height: 1.8;
            color: rgba(255,255,255,0.88);
            max-height: 380px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-break: break-word;
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.2) transparent;
            backdrop-filter: blur(16px);
        }

        .prompt-box::-webkit-scrollbar { width: 5px; }
        .prompt-box::-webkit-scrollbar-track { background: transparent; }
        .prompt-box::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 3px; }

        .copy-btn {
            position: absolute;
            top: 14px;
            right: 14px;
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 8px 18px;
            border-radius: 10px;
            font-size: 0.78rem;
            font-weight: 700;
            font-family: inherit;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s ease;
            z-index: 5;
            backdrop-filter: blur(8px);
        }

        .copy-btn:hover { background: rgba(255,255,255,0.25); }
        .copy-btn.copied { background: rgba(34,197,94,0.25); border-color: rgba(34,197,94,0.4); color: #4ade80; }

        /* ‚îÄ‚îÄ Instructions ‚îÄ‚îÄ */
        .instructions {
            background: rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 20px;
            backdrop-filter: blur(16px);
        }

        .instructions h3 {
            font-size: 1rem;
            font-weight: 800;
            margin-bottom: 20px;
        }

        .inst-step {
            display: flex;
            gap: 14px;
            margin-bottom: 18px;
        }

        .inst-step:last-child { margin-bottom: 0; }

        .inst-num {
            width: 26px; height: 26px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 800;
            flex-shrink: 0;
        }

        .inst-text {
            font-size: 0.88rem;
            line-height: 1.6;
            opacity: 0.85;
        }

        .inst-text strong { color: #fff; opacity: 1; }

        .inst-text code {
            background: rgba(255,255,255,0.15);
            color: white;
            padding: 2px 8px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-family: 'SF Mono', 'Fira Code', monospace;
        }

        /* ‚îÄ‚îÄ Gallery Section ‚îÄ‚îÄ */
        .gallery-divider {
            width: 100%;
            max-width: 640px;
            text-align: center;
            margin: 48px auto 32px;
            position: relative;
        }

        .gallery-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: rgba(255,255,255,0.15);
        }

        .gallery-divider span {
            background: #d4145a;
            padding: 0 20px;
            position: relative;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.6;
        }

        .gallery-section {
            max-width: 640px;
            width: 100%;
            margin: 0 auto;
            padding-bottom: 60px;
        }

        .gallery-header {
            text-align: center;
            margin-bottom: 28px;
        }

        .gallery-header h3 {
            font-size: 1.4rem;
            font-weight: 900;
            margin-bottom: 6px;
        }

        .gallery-header p {
            font-size: 0.85rem;
            opacity: 0.6;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }

        .gallery-card {
            background: rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.25s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: block;
            backdrop-filter: blur(8px);
        }

        .gallery-card:hover {
            border-color: rgba(255,255,255,0.25);
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(0,0,0,0.2);
        }

        .gallery-card-preview {
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.4rem;
            position: relative;
            overflow: hidden;
        }

        .gallery-card-info {
            padding: 14px 16px;
            border-top: 1px solid rgba(255,255,255,0.08);
        }

        .gallery-card-names {
            font-size: 0.88rem;
            font-weight: 700;
        }

        .gallery-card-date {
            font-size: 0.72rem;
            opacity: 0.5;
            margin-top: 3px;
        }

        /* ‚îÄ‚îÄ Animations ‚îÄ‚îÄ */
        .fade-in {
            animation: fadeIn 0.6s ease forwards;
        }

        .fade-in-up {
            opacity: 0;
            animation: fadeInUp 0.6s ease forwards;
        }

        .fade-in-up-d1 { animation-delay: 0.1s; }
        .fade-in-up-d2 { animation-delay: 0.25s; }
        .fade-in-up-d3 { animation-delay: 0.4s; }
        .fade-in-up-d4 { animation-delay: 0.55s; }
        .fade-in-up-d5 { animation-delay: 0.7s; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(24px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
        .footer {
            text-align: center;
            padding: 24px;
            font-size: 0.75rem;
            color: rgba(255,255,255,0.5);
        }

        .footer a { color: white; text-decoration: none; font-weight: 600; }

        /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
        @media (max-width: 520px) {
            .screen { padding: 32px 20px; }
            .gallery-grid { grid-template-columns: 1fr; }
            .btn-white, .btn-pink { padding: 16px 36px; font-size: 0.95rem; }
        }

        /* ‚îÄ‚îÄ Toast ‚îÄ‚îÄ */
        .toast {
            position: fixed;
            bottom: 28px;
            left: 50%;
            transform: translateX(-50%) translateY(80px);
            background: #1e1e1e;
            border: 1px solid #333;
            color: #fafafa;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            z-index: 1000;
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        /* ‚îÄ‚îÄ Nav Back Button ‚îÄ‚îÄ */
        .back-link {
            position: absolute;
            top: 24px;
            left: 24px;
            z-index: 20;
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            backdrop-filter: blur(8px);
            transition: background 0.2s;
        }

        .back-link:hover { background: rgba(255,255,255,0.2); }

        .back-link-dark {
            background: rgba(255,255,255,0.05);
            color: #a1a1aa;
        }

        .back-link-dark:hover { background: rgba(255,255,255,0.1); color: white; }
    </style>
</head>
<body>

<div class="hearts-layer" id="heartsLayer"></div>
<div class="toast" id="toast"></div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN 1: LANDING ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen bg-pink active" id="screen1">
    <div class="content">
        <span class="logo-heart fade-in-up">‚ù§Ô∏è</span>
        <h1 class="title fade-in-up fade-in-up-d1">Claudentines<br>Wrapped</h1>
        <p class="subtitle fade-in-up fade-in-up-d2">A Valentine's Gift, Built by AI</p>
        <p class="description fade-in-up fade-in-up-d3">
            We'll generate a prompt you can paste into <strong>Claude Code</strong> to create a Spotify Wrapped-style story of your relationship ‚Äî personalized with your real texts.
        </p>
        <div class="btn-group fade-in-up fade-in-up-d4">
            <button class="btn btn-white" onclick="showScreen(2)">
                Get Started
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
            </button>
            <button class="btn btn-outline" onclick="showScreen(4)">
                View Other Wrappeds
            </button>
        </div>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN 2: NAME INPUT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen bg-pink" id="screen2">
    <button class="back-link" onclick="showScreen(1)">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
    </button>
    <div class="content">
        <span class="logo-heart fade-in-up" style="font-size:3.5rem;">üíï</span>
        <h2 class="fade-in-up fade-in-up-d1" style="font-size:clamp(1.8rem,6vw,2.8rem); font-weight:900; letter-spacing:-1px; margin-bottom:8px;">Who's it for?</h2>
        <p class="fade-in-up fade-in-up-d2" style="font-size:1rem; opacity:0.8; line-height:1.6;">Enter your partner's name so Claude Code can find and analyze your iMessage conversation with them.</p>

        <div class="input-wrapper fade-in-up fade-in-up-d3">
            <label class="input-label">Their first name</label>
            <input class="name-input" type="text" id="partnerName" placeholder="e.g. Sarah" autocomplete="off" autofocus>
            <p class="small-note">Nothing is stored ‚Äî this is only used to generate your prompt.</p>
        </div>

        <div class="btn-group fade-in-up fade-in-up-d4">
            <button class="btn btn-white" id="generateBtn" disabled onclick="generateAndShow()">
                Generate My Prompt
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></svg>
            </button>
        </div>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN 3: PROMPT OUTPUT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen bg-pink" id="screen3" style="justify-content:flex-start; padding-top:80px;">
    <button class="back-link" onclick="showScreen(2)">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
    </button>
    <div class="prompt-screen-inner">

        <div class="prompt-header">
            <h2>Your prompt is ready ‚ú®</h2>
            <p>Copy this and paste it into Claude Code. It'll build your entire Wrapped.</p>
            <p style="font-size:0.8rem; opacity:0.55; margin-top:6px;">Nothing is shared by default. You'll see an option to share with others.</p>
        </div>

        <div class="prompt-box-wrap">
            <button class="copy-btn" id="copyBtn" onclick="copyPrompt()">
                <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                Copy
            </button>
            <div class="prompt-box" id="promptOutput"></div>
        </div>

        <div class="instructions">
            <h3>How to use this</h3>

            <div class="inst-step">
                <div class="inst-num">1</div>
                <div class="inst-text"><strong>Install Claude Code</strong> ‚Äî open Terminal and run <code>npm install -g @anthropic-ai/claude-code</code></div>
            </div>

            <div class="inst-step">
                <div class="inst-num">2</div>
                <div class="inst-text"><strong>Create a folder</strong> ‚Äî <code>mkdir valentines && cd valentines</code></div>
            </div>

            <div class="inst-step">
                <div class="inst-num">3</div>
                <div class="inst-text"><strong>Launch it</strong> ‚Äî type <code>claude</code> and hit Enter</div>
            </div>

            <div class="inst-step">
                <div class="inst-num">4</div>
                <div class="inst-text"><strong>Paste the prompt</strong> above and let Claude build everything. It'll read your messages, crunch the stats, and create the whole Wrapped experience.</div>
            </div>

            <div class="inst-step">
                <div class="inst-num">5</div>
                <div class="inst-text"><strong>Open the file</strong> Claude creates and send her the link. You're done.</div>
            </div>
        </div>

        <div style="text-align:center; margin-top:8px; margin-bottom:20px;">
            <button class="btn btn-white" onclick="copyPrompt()" style="width:100%; max-width:400px;">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                Copy Prompt
            </button>
        </div>

        <!-- Gallery Below -->
        <div class="gallery-divider">
            <span>or check these out</span>
        </div>

        <div class="gallery-section">
            <div class="gallery-header">
                <h3>Community Wrappeds üíï</h3>
                <p>See what others have made</p>
            </div>

            <div class="gallery-grid" id="galleryGrid">
                <!-- Populated by JS -->
            </div>
        </div>

        <div class="footer">
            Made with love, powered by <a href="https://claude.ai/download" target="_blank">Claude Code</a>
        </div>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCREEN 4: GALLERY (from landing) ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="screen bg-pink" id="screen4" style="justify-content:flex-start; padding-top:80px;">
    <button class="back-link" onclick="showScreen(1)">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
    </button>
    <div class="prompt-screen-inner">
        <div class="gallery-header" style="margin-bottom:32px;">
            <h3 style="font-size:clamp(1.6rem,5vw,2.2rem); font-weight:900; letter-spacing:-0.5px;">Community Wrappeds üíï</h3>
            <p style="opacity:0.7; margin-top:8px;">Real wrappeds made by real couples using Claudentines.</p>
        </div>

        <div class="gallery-grid" id="galleryGrid2">
            <!-- Populated by JS -->
        </div>

        <div style="text-align:center; margin-top:40px;">
            <button class="btn btn-white" onclick="showScreen(1)">
                Make Your Own
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
            </button>
        </div>

        <div class="footer">
            Made with love, powered by <a href="https://claude.ai/download" target="_blank">Claude Code</a>
        </div>
    </div>
</div>

<script>
// ‚îÄ‚îÄ Hearts ‚îÄ‚îÄ
function spawnHearts() {
    const layer = document.getElementById('heartsLayer');
    const heartTypes = ['‚ô•', '‚ô°', '‚ù§Ô∏è', 'üíï', 'üíó', 'üíñ', 'üíò', 'üíù', 'üíì', 'üíû', 'ü©∑', 'ü§ç', 'ü©µ'];
    const count = 80;

    for (let i = 0; i < count; i++) {
        const h = document.createElement('div');
        h.className = 'heart';
        h.textContent = heartTypes[Math.floor(Math.random() * heartTypes.length)];

        const size = 0.6 + Math.random() * 1.8;
        const opacity = 0.15 + Math.random() * 0.45;
        const duration = 10 + Math.random() * 20;
        const delay = Math.random() * duration;
        const startX = Math.random() * 100;
        const startY = Math.random() * 100;
        const drift = -60 + Math.random() * 120;

        h.style.cssText = `
            left: ${startX}%;
            top: ${startY}%;
            font-size: ${size}rem;
            --s: ${0.8 + Math.random() * 0.4};
            --o: ${opacity};
            --dx: ${drift}px;
            animation-duration: ${duration}s;
            animation-delay: -${delay}s;
        `;

        layer.appendChild(h);
    }
}
spawnHearts();

// ‚îÄ‚îÄ Screen Navigation ‚îÄ‚îÄ
function showScreen(num) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById('screen' + num).classList.add('active');

    // Toggle hearts visibility
    const heartsLayer = document.getElementById('heartsLayer');
    if (num === 1 || num === 2) {
        heartsLayer.style.opacity = '1';
        heartsLayer.style.transition = 'opacity 0.5s';
    } else {
        heartsLayer.style.opacity = '0';
        heartsLayer.style.transition = 'opacity 0.5s';
    }

    window.scrollTo(0, 0);
}

// ‚îÄ‚îÄ Name Input ‚îÄ‚îÄ
const nameInput = document.getElementById('partnerName');
const genBtn = document.getElementById('generateBtn');

nameInput.addEventListener('input', () => {
    genBtn.disabled = !nameInput.value.trim();
});

nameInput.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' && nameInput.value.trim()) generateAndShow();
});

// ‚îÄ‚îÄ Generate Prompt ‚îÄ‚îÄ
function generateAndShow() {
    const name = nameInput.value.trim();
    if (!name) return;

    const prompt = generatePrompt(name);
    document.getElementById('promptOutput').textContent = prompt;
    showScreen(3);
}

function generatePrompt(partnerName) {
    return `I want you to build a "Relationship Wrapped" ‚Äî a Spotify Wrapped-style interactive story experience as a single HTML file. This is a Valentine's Day gift for my partner, ${partnerName}.

STEP 1 ‚Äî READ OUR IMESSAGE CONVERSATION:
First, read our iMessage text history. The iMessage database is at ~/Library/Messages/chat.db ‚Äî it's a SQLite database. Query it to find my conversation with "${partnerName}". Try matching on the display name or address in the 'handle' table first. If no contact is named "${partnerName}", search through message content for me using that name (e.g. "hey ${partnerName}", "love you ${partnerName}", "miss you ${partnerName}") to identify the right conversation thread. You can also look for signals like: highest message frequency, romantic language ("love", "miss you", "babe", "baby", heart emoji), and long conversation history to identify the most likely partner conversation. Extract ALL messages between us.

From the messages, compute the following statistics:
- Total message count (and per-person breakdown)
- Date range (first message to today)
- Messages per month (for a bar chart)
- Busiest single day (most messages)
- Peak texting hour (which hour of the day has the most messages)
- Texting streak (longest consecutive-day streak)
- Top 5 most-used words (excluding common stop words like "the", "a", "is", "it", "to", "and", "I", "you", "that", "in", "of", "for", "my", "on", "was", "do", etc.)
- Top emoji used (with counts)
- Reaction/tapback counts (‚ù§Ô∏è, üòÇ, üëç, etc.)
- Pet names used (babe, baby, bb, bby, hun, love, etc.) with counts
- First message ever sent between us (as a quote)
- Any "I love you" messages (find the first one)
- A funny or sweet memorable quote from each person

STEP 2 ‚Äî BUILD THE WRAPPED:
Using ALL the real data you extracted, build a full-screen, mobile-first story experience (like Instagram Stories / Spotify Wrapped). Requirements:

DESIGN:
- Black background with bold, vibrant gradient backgrounds per slide (pinks, purples, corals, teals, oranges, deep blues ‚Äî different per slide)
- Clean sans-serif font (Google Fonts ‚Äî Inter for body)
- Smooth slide-up animations, scale-in effects for big numbers, staggered animation delays
- Progress bar at top with segments for each slide
- Tap/click navigation: left side = back, right side = forward
- Hold to pause, keyboard arrow support
- Auto-advance timer per slide (5-8 seconds)

SLIDES TO CREATE (18-22 total, alternating between data slides and open-ended/vibes slides):

IMPORTANT: Interleave the data slides and open-ended slides throughout. The experience should flow naturally ‚Äî a stat, then a heartfelt inference, then another stat, then a vibes moment. The open-ended slides are what make this special. For ALL qualitative/open-ended slides, actually READ the text content deeply. Analyze the language, tone, inside jokes, topics, and emotional patterns to write insightful, specific, heartfelt copy. These should NOT be generic ‚Äî they should feel like a best friend who's read every text wrote them. Use real quotes and references from the actual messages where possible.

--- DATA SLIDES (interleave these with the open-ended slides below) ---

1. INTRO: Title card ‚Äî "Your Relationship Wrapped" with both names, date range. "Tap to begin ‚Üí"

2. TOTAL MESSAGES: Giant animated number of total messages. Per-day average. A fun comparison.

3. THE BEGINNING: Show the actual first text messages between us in iMessage bubble style (blue = sent, gray = received). Include the date.

4. TEXTING STREAK: Big fire emoji + streak number + "consecutive days". Note when it started.

5. MONTHLY BREAKDOWN: Animated horizontal bar chart showing messages by month. Highlight the biggest month with a comment like "The falling-in-love month."

6. PEAK HOURS: Big centered time (e.g. "11 PM") with count. Comment about being night owls or early birds.

7. TOP EMOJI: Show top 4 emoji with counts and fun one-line descriptions.

8. PET NAMES: What we call each other, with counts. Warm styling.

9. FIRST "I LOVE YOU": If found, show it in iMessage style with the date. If not found, skip this slide.

--- OPEN-ENDED / VIBES SLIDES (interleave these with the data slides above) ---

10. THE ESSENCE OF YOUR RELATIONSHIP: Distill the entire relationship down to its core ‚Äî in 2-3 poetic sentences, capture what makes this relationship unique. What's the emotional throughline across all the messages? This should feel like someone captured your relationship in a bottle. Use a beautiful typographic layout.

11. THINGS ONLY YOU TWO SAY: Find inside jokes, recurring phrases, or weird things that come up repeatedly. Every couple has their own language ‚Äî surface it. Show 3-4 of these with context. This is the "if you know, you know" slide.

12. WHY YOU LOVE EACH OTHER: Pull real compliments, declarations, and sweet things each person has said about the other from the texts. Display as beautiful quote cards. Go beyond surface-level ‚Äî find the moments where someone said something truly heartfelt.

13. YOUR COUPLE VIBE: A fun personality card ‚Äî "You two are the [specific archetype] couple." E.g. "The 2am-philosophy-debate, steal-each-other's-hoodies couple." Use emoji and a 2-3 line description that references real things from the texts.

14. WHAT YOUR KIDS WILL BE LIKE: Based on both personalities as revealed in the texts, make playful, loving predictions about their future kids. "Will definitely know the word [most-used word] before 'mama'." "Will be raised on [recurring food/topic]." "Will have strong opinions about [thing you debate]." Keep it cute and specific to the actual conversations.

15. YOUR FUTURE TOGETHER: Based on current patterns, make heartfelt and fun predictions. "Based on your texting velocity, you'll hit 100,000 messages by [date]." "You'll still be debating [recurring topic] in your 80s." "Your retirement will involve [thing from texts]." Mix tender with playful.

16. HOW YOU SHOW LOVE: Analyze how each person expresses affection in the texts. Does one send long paragraphs while the other sends rapid-fire messages? Does one use more emoji? More "I miss you"s? Present it like a love language breakdown with real examples.

17. A LETTER FROM THE DATA: Write a short, heartfelt 4-5 sentence love letter as if the data itself is speaking. "In 13,000 messages, you never once went a day without saying goodnight..." ‚Äî make it emotional and specific to what the texts actually show.

--- CLOSING ---

18. MILESTONES: Vertical timeline ‚Äî first text, first "I love you", biggest texting day, and today.

19. FINALE: "Happy Valentine's Day, ${partnerName}" with confetti animation (CSS, no libraries), a heartfelt 3-line message, and a signature.

TECHNICAL REQUIREMENTS:
- Single HTML file, no external dependencies except Google Fonts
- All CSS in <style>, all JS in <script>
- No frameworks or build tools ‚Äî vanilla HTML/CSS/JS only
- CSS confetti animation on the final slide (animated divs, not canvas)
- Progress bar with requestAnimationFrame
- CSS @keyframes with animation-fill-mode: forwards
- Mobile responsive, use CSS clamp() for fluid typography
- CSS custom properties for colors

Make it genuinely beautiful and emotional. Every slide should feel polished and personal. Use the REAL data from our conversation to make it authentic.

SHARE TO GALLERY FEATURE:
On the finale slide (the confetti slide), AFTER the heartfelt message and signature, add a "Share to Gallery" section at the bottom. This lets the user publicly list their Wrapped on the Claudentines community gallery for others to see.

IMPORTANT: The finale slide's share button and modal MUST be clickable. The left/right tap navigation zones that cover the screen for slide navigation must NOT overlay the share button area. On the finale slide, either disable the navigation tap zones entirely, or give the share section and modal a higher z-index (z-index: 9999) and add pointer-events:auto so clicks reach the buttons. The share modal must be above everything.

Implementation:
1. At the top of the <script> section, add a metadata constant:
   const WRAPPED_META = {
       names: "[Your Name] & ${partnerName}",
       date_range: "[First message month/year] ‚Äì Feb 2026",
       emoji: "üíï",
       gradient: "linear-gradient(135deg, #f74c89, #c0044d)"
   };
   Fill in the actual names and date range from the extracted data. Pick an emoji that fits the couple's vibe. Use the intro slide's gradient colors.

2. On the finale slide, add this HTML after the signature div:
   <div style="margin-top:3rem; text-align:center; padding-top:1.5rem; border-top:1px solid rgba(255,255,255,0.15); position:relative; z-index:9999;" class="anim-up-delay-5">
       <button id="shareBtn" onclick="openShareModal()" style="background:rgba(255,255,255,0.15); border:2px solid rgba(255,255,255,0.3); color:white; padding:14px 32px; border-radius:50px; font-family:inherit; font-weight:700; font-size:0.9rem; cursor:pointer; transition:all 0.25s ease; backdrop-filter:blur(8px); position:relative; z-index:9999;">
           Share to Gallery üåç
       </button>
       <p style="font-size:0.75rem; opacity:0.4; margin-top:8px;">Nothing is shared by default ‚Äî only if you tap this button</p>
       <div id="shareResult"></div>
   </div>

3. Add a share consent modal as a direct child of <body> (NOT inside any slide). Style it as a centered overlay:
   <div id="shareModal" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; z-index:99999; background:rgba(0,0,0,0.7); backdrop-filter:blur(8px); align-items:center; justify-content:center; padding:24px;">
       <div style="background:#1a1a2e; border:1px solid rgba(255,255,255,0.15); border-radius:20px; padding:32px; max-width:420px; width:100%; text-align:center; color:white; font-family:inherit; position:relative;">
           <button onclick="closeShareModal()" style="position:absolute; top:12px; right:16px; background:none; border:none; color:rgba(255,255,255,0.5); font-size:1.5rem; cursor:pointer; line-height:1;">&times;</button>
           <h3 style="font-size:1.3rem; font-weight:800; margin-bottom:8px;">Share to Gallery</h3>
           <p style="font-size:0.85rem; opacity:0.7; line-height:1.6; margin-bottom:20px;">This will publicly list your Wrapped on the Claudentines community gallery. The following will be shared:</p>
           <div style="background:rgba(255,255,255,0.08); border-radius:12px; padding:16px; margin-bottom:20px; text-align:left; font-size:0.85rem; line-height:1.8;">
               <div>Your names: <strong id="modalNames"></strong></div>
               <div>Date range: <strong id="modalDateRange"></strong></div>
               <div>Your full Wrapped experience (all slides)</div>
           </div>
           <label style="display:flex; align-items:center; justify-content:center; gap:10px; margin-bottom:24px; cursor:pointer; font-size:0.88rem;">
               <input type="checkbox" id="anonymizeCheck" style="width:18px; height:18px; accent-color:#f74c89; cursor:pointer;">
               Anonymize our names
           </label>
           <button onclick="confirmShare()" style="background:linear-gradient(135deg, #f74c89, #e81b5b); border:none; color:white; padding:14px 36px; border-radius:50px; font-family:inherit; font-weight:700; font-size:0.95rem; cursor:pointer; width:100%; transition:all 0.25s ease;">
               Share Wrapped
           </button>
           <p style="font-size:0.7rem; opacity:0.35; margin-top:12px;">You can request removal anytime</p>
       </div>
   </div>

4. Add these JavaScript functions:
   function openShareModal() {
       const modal = document.getElementById('shareModal');
       document.getElementById('modalNames').textContent = WRAPPED_META.names;
       document.getElementById('modalDateRange').textContent = WRAPPED_META.date_range;
       document.getElementById('anonymizeCheck').checked = false;
       modal.style.display = 'flex';
   }

   function closeShareModal() {
       document.getElementById('shareModal').style.display = 'none';
   }

   // Close modal when clicking the backdrop
   document.getElementById('shareModal').addEventListener('click', function(e) {
       if (e.target === this) closeShareModal();
   });

   async function confirmShare() {
       const modal = document.getElementById('shareModal');
       const anonymize = document.getElementById('anonymizeCheck').checked;
       const meta = { ...WRAPPED_META };
       if (anonymize) {
           meta.names = 'Anonymous Couple';
       }
       const btn = document.getElementById('shareBtn');
       closeShareModal();
       btn.textContent = 'Sharing...';
       btn.disabled = true;
       btn.style.opacity = '0.5';
       try {
           const res = await fetch('https://claudentines.ai/wrappeds', {
               method: 'POST',
               headers: { 'Content-Type': 'application/json' },
               body: JSON.stringify({
                   ...meta,
                   html_content: anonymize
                       ? document.documentElement.outerHTML.replace(new RegExp(WRAPPED_META.names.split(' & ')[0], 'g'), 'Partner A').replace(new RegExp(WRAPPED_META.names.split(' & ')[1], 'g'), 'Partner B')
                       : document.documentElement.outerHTML
               })
           });
           const data = await res.json();
           const link = 'https://claudentines.ai/wrappeds' + data.url;
           document.getElementById('shareResult').innerHTML =
               '<p style="margin-top:12px; font-size:0.85rem; opacity:0.7;">Listed on the gallery!</p>' +
               '<a href="' + link + '" target="_blank" style="color:#f48fb1; font-weight:700; font-size:0.95rem; text-decoration:none;">' + link + '</a>';
           btn.textContent = 'Listed! ‚úÖ';
       } catch (e) {
           btn.textContent = 'Failed ‚Äî tap to retry';
           btn.disabled = false;
           btn.style.opacity = '1';
       }
   }

Output a single file called valentines.html.`;
}

// ‚îÄ‚îÄ Copy ‚îÄ‚îÄ
function copyPrompt() {
    const text = document.getElementById('promptOutput').textContent;
    navigator.clipboard.writeText(text).then(() => {
        const btn = document.getElementById('copyBtn');
        btn.innerHTML = `<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Copied!`;
        btn.classList.add('copied');
        showToast('Copied to clipboard!');
        setTimeout(() => {
            btn.innerHTML = `<svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg> Copy`;
            btn.classList.remove('copied');
        }, 2500);
    });
}

function showToast(msg) {
    const t = document.getElementById('toast');
    t.innerHTML = `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#4ade80" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg> ${msg}`;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 2500);
}

// ‚îÄ‚îÄ Server URL (update this when deploying) ‚îÄ‚îÄ
const SERVER_URL = 'https://claudentines.ai';

// ‚îÄ‚îÄ Gallery ‚îÄ‚îÄ
function renderGallery(containerId, items) {
    const grid = document.getElementById(containerId);
    grid.innerHTML = items.map(item => `
        <a href="${item.url}" class="gallery-card">
            <div class="gallery-card-preview" style="background:${item.gradient || 'linear-gradient(135deg, #f74c89, #c0044d)'};">
                <span style="font-size:2.8rem; filter:drop-shadow(0 2px 8px rgba(0,0,0,0.2));">${item.emoji}</span>
            </div>
            <div class="gallery-card-info">
                <div class="gallery-card-names">${item.names}</div>
                <div class="gallery-card-date">${item.date_range}</div>
            </div>
        </a>
    `).join('');
}

async function loadGallery() {
    try {
        const res = await fetch('/api/wrappeds');
        const items = await res.json();
        renderGallery('galleryGrid', items);
        renderGallery('galleryGrid2', items);
    } catch (e) {
        console.error('Failed to load gallery:', e);
    }
}

loadGallery();
</script>

</body>
</html>
